flowchart TB
    %% Client
    A[Android App<br/>(Kotlin)]

    %% Backend
    B[Express API Server]
    C[JWT Auth Middleware]
    D[Controllers]

    %% AI
    E[Prompt Builder]
    F[LLM / AI Engine]
    G[Insight Processor]

    %% DB
    H[(MongoDB)]

    %% Flow
    A -->|API Requests + JWT| B
    B --> C
    C -->|Authorized| D
    C -->|Unauthorized| X[401 Error]

    D --> E
    E --> F
    F --> G
    G --> H

    D --> H
    H --> D

    D --> B
    B --> A

    %% Utilities
    B -.-> I[Rate Limiter]
    D -.-> J[Global Error Handler]
